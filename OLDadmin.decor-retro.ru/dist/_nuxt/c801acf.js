(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{428:function(t,e,o){"use strict";o.r(e);var r={props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},data:function(){return{monthName:"",day:""}},mounted:function(){var t=new Date;this.monthName=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"][t.getMonth()],this.day=t.getDate()}},n=o(2),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"kt-subheader   kt-grid__item",attrs:{id:"kt_subheader"}},[o("div",{staticClass:"kt-container  kt-container--fluid "},[o("div",{staticClass:"kt-subheader__main"},[o("h3",{staticClass:"kt-subheader__title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),o("span",{staticClass:"kt-subheader__separator kt-hidden"}),t._v(" "),o("div",{staticClass:"kt-subheader__breadcrumbs"},[o("n-link",{staticClass:"kt-subheader__breadcrumbs-home",attrs:{to:{path:"/"}}},[o("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),t._l(t.items,(function(e,i){return[o("span",{staticClass:"kt-subheader__breadcrumbs-separator"}),t._v(" "),o("n-link",{staticClass:"kt-subheader__breadcrumbs-link",attrs:{to:{name:e.name,params:e.params}}},[t._v("\n                    "+t._s(t._f("capitalize")(e.title))+" ")])]}))],2)]),t._v(" "),o("div",{staticClass:"kt-subheader__toolbar"},[o("div",{staticClass:"kt-subheader__wrapper"},[o("a",{staticClass:"btn btn-sm btn-elevate btn-brand btn-elevate",attrs:{href:"#",id:"kt_dashboard_daterangepicker","data-toggle":"kt-tooltip",title:"","data-placement":"left","data-original-title":"Йо! Это я, сегодняшняя дата!"}},[o("span",{staticClass:"kt-opacity-7",attrs:{id:"kt_dashboard_daterangepicker_title"}},[t._v("Сегодня:")]),t._v(" \n                    "),o("span",{staticClass:"kt-font-bold",attrs:{id:"kt_dashboard_daterangepicker_date"}},[t._v(t._s(t.monthName)+" "+t._s(t.day))]),t._v(" "),o("i",{staticClass:"flaticon-calendar-with-a-clock-time-tools kt-padding-l-5 kt-padding-r-0"})])])])])])}),[],!1,null,"06a05328",null);e.default=component.exports},429:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var r=o(430),n=o(431),l=function(){function t(){Object(r.a)(this,t),this.errors={}}return Object(n.a)(t,[{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t.errors}}]),t}()},455:function(t,e,o){var content=o(543);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("725d5466",content,!0,{sourceMap:!1})},542:function(t,e,o){"use strict";var r=o(455);o.n(r).a},543:function(t,e,o){(e=o(7)(!1)).push([t.i,".item__error[data-v-e69f03bc]{color:#f56c6c;font-size:11px;line-height:1;padding-top:4px;position:absolute}",""]),t.exports=e},556:function(t,e,o){"use strict";o.r(e);o(14),o(25);var r=o(3),n=(o(31),o(433)),l=o(434),c=o.n(l),d=(o(435),o(428)),v=o(429),m=o(436),_=o.n(m),h={middleware:"auth",components:{Breadcrumbs:d.default,"my-upload":n.a,Treeselect:c.a},data:function(){return{breadcrumbsItems:[{title:"Категории",name:"categories"},{title:"Редактирование",name:"categories-id",params:"id: "+this.$route.params.id}],category:{},photo:"",statuses:[{label:"Включено",value:"active"},{label:"Отключено",value:"inactive"}],categories:[],sortValueBy:"ORDER_SELECTED",show:!1,showPhoto:!1,params:{name:"photo"},loading:!1,errors:new v.a}},computed:{iSlug:function(){if(this.category.name){var t=this.sanitizeTitle(this.category.name);return this.category.slug=t,t}}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$permission(["*"])||t.$router.push({name:"index"}),e.next=3,t.getItemOptionsData();case 3:return e.next=5,t.getEditData();case 5:case"end":return e.stop()}}),e)})))()},methods:{getItemOptionsData:function(){var t=this;this.loadingOptions=!0,this.$axios.get("http://193.169.179.233/api/adm/categories/options/data",{params:{id:this.$route.params.id}}).then((function(e){var data=e.data.data;t.categories=data.categories,t.categories.sort((function(a,b){return parseFloat(a.id)-parseFloat(b.id)}))})).catch((function(t){console.log(t)})).finally((function(){t.loadingOptions=!1}))},getEditData:function(){var t=this;this.loading=!0,this.$axios.get("http://193.169.179.233/api"+"/adm/categories/".concat(this.$route.params.id)).then((function(e){var data=e.data.data;t.category=data,null===t.category.parent_id&&(t.category.parent_id=0),data.image_url&&(t.photo=data.image_url,t.showPhoto=!0)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},update:function(){var t=this;this.loading=!0,0===this.category.parent_id&&(this.category.parent_id=null),this.$axios.patch("http://193.169.179.233/api"+"/adm/categories/".concat(this.$route.params.id),{category:this.category,photo:this.photo}).then((function(e){"success"===e.data.data.status&&t.$message({showClose:!0,message:"Успешно обновлено",type:"success",center:!0})})).catch((function(e){return t.errors.record(e.response.data)})).finally((function(){t.loading=!1}))},sanitizeTitle:function(t){return _()(t)},toggleShow:function(){this.show=!this.show},cropSuccess:function(t){this.photo=t,this.showPhoto=!0}}},f=(o(542),o(2)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Breadcrumbs",{attrs:{title:"Категории",items:t.breadcrumbsItems}}),t._v(" "),o("div",{staticClass:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"kt-form",attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[o("div",{staticClass:"kt-portlet"},[o("div",{staticClass:"kt-portlet__head"},[o("div",{staticClass:"kt-portlet__head-label"},[o("n-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"categories"}}},[o("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v("\n                                    В таблицу\n                                ")])],1),t._v(" "),t._m(0)]),t._v(" "),o("div",{staticClass:"kt-portlet__body"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showPhoto,expression:"showPhoto"}],staticClass:"row"},[o("div",{staticClass:"col-md-2"},[o("img",{staticStyle:{"border-radius":"50%",width:"100%",height:"auto"},attrs:{src:t.photo}})])]),t._v(" "),o("br",{directives:[{name:"show",rawName:"v-show",value:t.showPhoto,expression:"showPhoto"}]}),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-2"},[o("a",{staticClass:"btn btn-success btn-sm btn-block",staticStyle:{color:"white"},on:{click:t.toggleShow}},[t._v("Изменить фото")])]),t._v(" "),o("br"),t._v(" "),o("my-upload",{attrs:{field:"img",params:t.params,langType:"ru"},on:{"crop-success":t.cropSuccess},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t._v(" "),o("br"),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",[t._v("Название")]),t._v(" "),o("span",{staticStyle:{display:"none"}},[t._v(" "+t._s(t.iSlug))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],class:t.errors.get("name")?"form-control is-invalid":"form-control",attrs:{type:"text",placeholder:"Введите название категории",required:""},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}}),t._v(" "),o("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.get("name")))])])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",[t._v("Seo Url")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.category.slug,expression:"category.slug"}],class:t.errors.get("slug")?"form-control is-invalid":"form-control",attrs:{type:"text",placeholder:"",readonly:""},domProps:{value:t.category.slug},on:{input:function(e){e.target.composing||t.$set(t.category,"slug",e.target.value)}}}),t._v(" "),o("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.get("slug")))])])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group "},[o("label",[t._v("Категория")]),t._v(" "),o("br"),t._v(" "),o("treeselect",{attrs:{options:t.categories,"sort-value-by":t.sortValueBy,"show-count":!0,placeholder:"Выберите категорию",required:""},model:{value:t.category.parent_id,callback:function(e){t.$set(t.category,"parent_id",e)},expression:"category.parent_id"}})],1)]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group "},[o("label",[t._v("Статус")]),t._v(" "),o("br"),t._v(" "),o("el-select",{staticClass:"form-control fixed-select",attrs:{filterable:"",placeholder:"Выберите статус"},model:{value:t.category.status,callback:function(e){t.$set(t.category,"status",e)},expression:"category.status"}},t._l(t.statuses,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),t._v(" "),o("div",{staticClass:"card"},[t._m(1),t._v(" "),o("div",{staticClass:"card-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",[t._v("Seo заголовок")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.category.seo_title,expression:"category.seo_title"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.category.seo_title},on:{input:function(e){e.target.composing||t.$set(t.category,"seo_title",e.target.value)}}})])])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group form-group-last"},[o("label",[t._v("Seo описание")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.category.seo_description,expression:"category.seo_description"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.category.seo_description},on:{input:function(e){e.target.composing||t.$set(t.category,"seo_description",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group form-group-last"},[o("label",[t._v("Seo ключевые слова")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.category.seo_keywords,expression:"category.seo_keywords"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.category.seo_keywords},on:{input:function(e){e.target.composing||t.$set(t.category,"seo_keywords",e.target.value)}}})])])])])])]),t._v(" "),o("div",{staticClass:"kt-portlet__foot"},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"kt-form__actions"},[o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"kt-portlet__head-label"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Сохранить")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header",attrs:{id:"headingOne3"}},[e("div",{staticClass:"card-title collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseOne3","aria-expanded":"false","aria-controls":"collapseOne3"}},[this._v("\n                                            SEO\n                                        ")])])}],!1,null,"e69f03bc",null);e.default=component.exports;installComponents(component,{Breadcrumbs:o(428).default})}}]);